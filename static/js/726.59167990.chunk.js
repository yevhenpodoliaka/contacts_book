"use strict";(self.webpackChunkcontacts_book=self.webpackChunkcontacts_book||[]).push([[726],{726:function(e,n,a){a.r(n),a.d(n,{default:function(){return K}});var t=a(885),o=a(2791),i=a(6925),r=a(6650),c=a(3978),l=a(6015),s=a(4565),d=a(5218),u=a(3811),m=a(7488),f=a(7237),h=a(3329),x=function(e){var n=e.id,a=e.name,r=e.favorite,c=(0,i.Z0)(),l=(0,t.Z)(c,2),s=l[0],x=l[1],v=x.isSuccess,Z=x.error,p=x.isLoading;return(0,o.useEffect)((function(){v&&d.ZP.success("status contact ".concat(a,' "is favorite" changed')),Z&&d.ZP.error("an error occurred while changing the status of a contact".concat(a))}),[Z,v,a]),(0,h.jsx)(u.Z,{size:"small","aria-label":"favorite",color:"primary",disabled:p,onClick:function(){return s({id:n,data:{favorite:!r}})},children:r?(0,h.jsx)(f.Z,{fontSize:"inherit"}):(0,h.jsx)(m.Z,{fontSize:"inherit"})})},v=(0,o.memo)(x),Z=a(7247),p=function(e){var n=e.id,a=e.name,r=(0,i.Nt)(),c=(0,t.Z)(r,2),l=c[0],s=c[1],m=s.isSuccess,f=s.error,x=s.isLoading;return(0,o.useEffect)((function(){m&&d.ZP.success("contact ".concat(a," is deleted")),f&&d.ZP.error("an error occurred while deleting a contact".concat(a))}),[f,m,a]),(0,h.jsx)(u.Z,{size:"small","aria-label":"delete",color:"primary",onClick:function(){return l(n)},disabled:x,children:(0,h.jsx)(Z.Z,{fontSize:"inherit"})})},j=(0,o.memo)(p),g=a(9e3),b=function(e){var n=e.openModal,a=e.setContactId,t=e.id;return(0,h.jsx)(u.Z,{size:"small",color:"primary","aria-label":"edit",onClick:function(){a(t),n()},children:(0,h.jsx)(g.Z,{fontSize:"inherit"})})},C=(0,o.memo)(b),k=function(e){var n=e.id,a=e.name,t=e.phone,o=e.email,i=e.favorite,d=e.setContactId,u=e.openModal,m=a[0];return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,h.jsx)(c.Z,{sx:{bgcolor:"secondary.main",width:24,height:24},children:m}),(0,h.jsxs)(l.Z,{sx:{flexGrow:1,ml:2},children:[(0,h.jsx)(s.Z,{variant:"button",display:"block",children:a}),(0,h.jsx)(s.Z,{variant:"caption",display:"block",children:o}),(0,h.jsx)(s.Z,{variant:"overline",display:"block",children:t})]}),(0,h.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,h.jsx)(j,{id:n,name:a}),(0,h.jsx)(C,{id:n,setContactId:d,openModal:u}),(0,h.jsx)(v,{id:n,favorite:i,name:a})]})]})})},y=(0,o.memo)(k),w=a(5048),P=a(5052),S=a(7177),I=function(e){var n,a=e.data,t=e.setContactId,o=e.openModal,i=a,r=(0,w.v9)(P.B8);(0,w.v9)(P.XG)&&(i=i.filter((function(e){return e.favorite})));var c=function(){var e,n=r.toLowerCase();return null===(e=i)||void 0===e?void 0:e.filter((function(e){return e.name.toLowerCase().includes(n)}))}();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(S.Z,{children:c?null===c||void 0===c?void 0:c.map((function(e){var n=e._id,a=e.name,i=e.phone,r=e.email,c=e.favorite;return(0,h.jsx)(y,{id:n,name:a,phone:i,email:r,favorite:c,setContactId:t,openModal:o},n)})):(0,h.jsx)(s.Z,{children:"Loading Contact ..."})}),0===(null===(n=i)||void 0===n?void 0:n.length)&&(0,h.jsx)(s.Z,{children:"there are not contacts"})]})},E=a(1169),W=function(){var e=(0,w.v9)(P.B8),n=(0,w.I0)();return(0,h.jsx)(r.Z,{children:(0,h.jsx)(E.ZP,{component:"form",value:e,onChange:function(e){n((0,P.Tv)(e.target.value))},placeholder:" Find contacts by name "})})},M=(0,o.memo)(W),z=a(5590),L=a(2892),F=a(4666),N=a(757),O=a(2419),T=(0,a(277).ZP)(z.Z)({position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"}),q=function(e){var n=e.onOpenModal,a=(0,w.I0)(),t=(0,w.v9)(P.XG);return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(L.Z,{position:"fixed",color:"primary",sx:{top:"auto",bottom:0},component:"footer",children:(0,h.jsxs)(F.Z,{children:[(0,h.jsx)(u.Z,{color:"inherit","aria-label":"favorite list",size:"large",onClick:function(){return a((0,P.o)())},children:t?(0,h.jsx)(N.Z,{}):(0,h.jsx)(f.Z,{})}),(0,h.jsx)(T,{color:"secondary","aria-label":"add",onClick:n,children:(0,h.jsx)(O.Z,{})})]})})})},D=a(1413),G=a(2232),_=a(5399),B=a(9823),J=o.forwardRef((function(e,n){return(0,h.jsx)(G.Z,(0,D.Z)({direction:"up",ref:n},e))})),V=function(e){var n=e.children,a=e.isOpen,t=e.closeModal,o=e.setContactId,i=function(){o(null),t()};return(0,h.jsxs)(_.Z,{open:a,onClose:i,TransitionComponent:J,children:[(0,h.jsx)(u.Z,{sx:{width:"25px",height:"25px"},color:"inherit",onClick:i,"aria-label":"close",children:(0,h.jsx)(B.Z,{})}),n]})},X=function(e,n){var a=(0,o.useState)((function(){var a;try{var t;a=JSON.parse(null!==(t=localStorage.getItem(e))&&void 0!==t?t:n)}catch(o){a=n}return a})),i=(0,t.Z)(a,2),r=i[0],c=i[1];return(0,o.useEffect)((function(){localStorage.setItem(e,JSON.stringify(r))}),[r,e]),[r,c]},Y=a(8437),A=a(7205),R=function(){var e=X("name",""),n=(0,t.Z)(e,2),a=n[0],r=n[1],c=X("email",""),s=(0,t.Z)(c,2),u=s[0],m=s[1],f=X("phone",""),x=(0,t.Z)(f,2),v=x[0],Z=x[1],p=(0,i.Tn)(),j=(0,t.Z)(p,2),g=j[0],b=j[1],C=b.isSuccess,k=b.data,y=b.isError,w=b.error,P=(0,i.wY)().data,S=null===P||void 0===P?void 0:P.data.result;(0,o.useEffect)((function(){C&&d.ZP.success("contact ".concat(k.data.contact.name," add in list")),y&&d.ZP.error("Error: ".concat(w.data.message," "))}),[C,k,w,y,v]);var I=function(e){var n=e.currentTarget,a=n.name,t=n.value;switch(a){case"name":r(t);break;case"email":m(t);break;case"phone":Z(t)}};return(0,h.jsxs)(l.Z,{component:"form",onSubmit:function(e){e.preventDefault(),a&&v?function(){var e=null===S||void 0===S?void 0:S.find((function(e){return e.name.toLowerCase()===a.toLowerCase()})),n=null===S||void 0===S?void 0:S.find((function(e){return e.phone===v}));e?d.ZP.error("".concat(a," is already in contacts")):n?d.ZP.error("contact with ".concat(v," number is already in contacts")):(g({name:a,phone:v,email:u}),r(""),m(""),Z(""))}():(0,d.ZP)("name and phone must have in form")},noValidate:!0,sx:{maxWidth:"sm",mx:"auto",p:"15px"},children:[(0,h.jsx)(Y.Z,{margin:"normal",required:!0,fullWidth:!0,label:"Name",name:"name",value:a,autoFocus:!0,onChange:I}),(0,h.jsx)(Y.Z,{margin:"normal",fullWidth:!0,id:"email",label:"Email",name:"email",value:u,onChange:I}),(0,h.jsx)(Y.Z,{margin:"normal",required:!0,fullWidth:!0,name:"phone",value:v,label:"Phone",type:"tel",onChange:I}),(0,h.jsx)(A.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Add"})]})},H=function(e){var n=e.id,a=X("editedName",""),r=(0,t.Z)(a,2),c=r[0],s=r[1],u=X("editedEmail",""),m=(0,t.Z)(u,2),f=m[0],x=m[1],v=X("editedPhone",""),Z=(0,t.Z)(v,2),p=Z[0],j=Z[1],g=(0,i.W1)(n).data,b=(0,i.i)(),C=(0,t.Z)(b,2),k=C[0],y=C[1],w=y.isSuccess,P=y.isError,S=y.error;function I(e){var n=e.currentTarget,a=n.name,t=n.value;switch(a){case"name":s(t);break;case"email":x(t);break;case"phone":j(t)}}(0,o.useEffect)((function(){g&&(s(g.data.contact.name),x(g.data.contact.email),j(g.data.contact.phone))}),[g,x,s,j]),(0,o.useEffect)((function(){w&&d.ZP.success("contact ".concat(g.data.contact.name," changed ")),P&&d.ZP.error("Error: ".concat(S.data.message," "))}),[g,S,P,w]);return(0,h.jsxs)(l.Z,{component:"form",onSubmit:function(e){e.preventDefault(),g.data.contact.name!==c||g.data.contact.email!==f||g.data.contact.phone!==p?(k({id:n,data:{name:c,email:f,phone:p}}),k({id:n,data:{name:c,email:f,phone:p}})):(0,d.ZP)("contact is not changed ")},noValidate:!0,sx:{maxWidth:"sm",mx:"auto",p:"15px"},children:[(0,h.jsx)(Y.Z,{margin:"normal",fullWidth:!0,label:"Name",name:"name",value:c,onChange:I}),(0,h.jsx)(Y.Z,{margin:"normal",fullWidth:!0,label:"Email",name:"email",value:f,onChange:I}),(0,h.jsx)(Y.Z,{margin:"normal",required:!0,fullWidth:!0,name:"phone",value:p,label:"Phone",type:"tel",onChange:I}),(0,h.jsx)(A.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Change"})]})},K=function(){var e=(0,o.useState)(!1),n=(0,t.Z)(e,2),a=n[0],r=n[1],c=(0,o.useState)(null),l=(0,t.Z)(c,2),s=l[0],d=l[1],u=(0,o.useCallback)((function(){r(!0)}),[]),m=(0,o.useCallback)((function(){r(!1)}),[]),f=(0,i.wY)().data,x=null===f||void 0===f?void 0:f.data.result;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("main",{style:{padding:"15px",margin:"65px 0"},children:[(null===x||void 0===x?void 0:x.length)>5&&(0,h.jsx)(M,{}),(0,h.jsx)(I,{data:x,setContactId:d,openModal:u})]}),(0,h.jsx)(q,{onOpenModal:u}),a&&(0,h.jsx)(V,{isOpen:a,closeModal:m,setContactId:d,children:s?(0,h.jsx)(H,{id:s}):(0,h.jsx)(R,{})})]})}}}]);
//# sourceMappingURL=726.59167990.chunk.js.map