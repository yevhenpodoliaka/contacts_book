"use strict";(self.webpackChunkcontacts_book=self.webpackChunkcontacts_book||[]).push([[500],{6500:function(e,n,a){a.r(n),a.d(n,{default:function(){return J}});var t=a(885),r=a(2791),i=a(6925),o=a(5218),c=a(6650),l=a(3978),s=a(6015),d=a(4565),u=a(3811),m=a(9e3),h=a(7247),f=a(7488),v=a(7237),x=a(1413),Z=a(2232),p=a(5399),g=a(9823),j=a(3329),b=r.forwardRef((function(e,n){return(0,j.jsx)(Z.Z,(0,x.Z)({direction:"up",ref:n},e))}));function C(e){var n=e.children,a=e.isOpen,t=e.toggleIsOpen;return(0,j.jsxs)(p.Z,{open:a,onClose:t,TransitionComponent:b,children:[(0,j.jsx)(u.Z,{sx:{width:"25px",height:"25px"},color:"inherit",onClick:t,"aria-label":"close",children:(0,j.jsx)(g.Z,{})}),n]})}var y=function(e,n){var a=(0,r.useState)((function(){var a;try{var t;a=JSON.parse(null!==(t=localStorage.getItem(e))&&void 0!==t?t:n)}catch(r){a=n}return a})),i=(0,t.Z)(a,2),o=i[0],c=i[1];return(0,r.useEffect)((function(){localStorage.setItem(e,JSON.stringify(o))}),[o,e]),[o,c]},k=a(8437),w=a(7205);function P(e){var n=e.id,a=y("editedName",""),c=(0,t.Z)(a,2),l=c[0],d=c[1],u=y("editedEmail",""),m=(0,t.Z)(u,2),h=m[0],f=m[1],v=y("editedPhone",""),x=(0,t.Z)(v,2),Z=x[0],p=x[1],g=(0,i.W1)(n).data,b=(0,i.i)(),C=(0,t.Z)(b,2),P=C[0],S=C[1],E=S.isSuccess,W=S.isError,O=S.error;function z(e){var n=e.currentTarget,a=n.name,t=n.value;switch(a){case"name":d(t);break;case"email":f(t);break;case"phone":p(t)}}(0,r.useEffect)((function(){g&&(d(g.data.contact.name),f(g.data.contact.email),p(g.data.contact.phone))}),[g,f,d,p]),(0,r.useEffect)((function(){E&&o.ZP.success("contact ".concat(g.data.contact.name," changed ")),W&&o.ZP.error("Error: ".concat(O.data.message," "))}),[g,O,W,E]);return(0,j.jsxs)(s.Z,{component:"form",onSubmit:function(e){e.preventDefault(),g.data.contact.name!==l||g.data.contact.email!==h||g.data.contact.phone!==Z?(P({id:n,data:{name:l,email:h,phone:Z}}),P({id:n,data:{name:l,email:h,phone:Z}})):(0,o.ZP)("contact is not changed ")},noValidate:!0,sx:{maxWidth:"sm",mx:"auto",p:"15px"},children:[(0,j.jsx)(k.Z,{margin:"normal",fullWidth:!0,label:"Name",name:"name",value:l,onChange:z}),(0,j.jsx)(k.Z,{margin:"normal",fullWidth:!0,label:"Email",name:"email",value:h,onChange:z}),(0,j.jsx)(k.Z,{margin:"normal",required:!0,fullWidth:!0,name:"phone",value:Z,label:"Phone",type:"tel",onChange:z}),(0,j.jsx)(w.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Change"})]})}function S(e){var n=e.id,a=e.name,x=e.phone,Z=e.email,p=e.favorite,g=(0,r.useState)(!1),b=(0,t.Z)(g,2),y=b[0],k=b[1],w=function(){k(!y)},S=(0,i.Nt)(),E=(0,t.Z)(S,2),W=E[0],O=E[1],z=O.isSuccess,I=O.error,L=O.isLoading,F=(0,i.Z0)(),N=(0,t.Z)(F,2),T=N[0],q=N[1],D=q.isSuccess,G=q.error,_=q.isLoading;(0,r.useEffect)((function(){z&&o.ZP.success("contact ".concat(a," is deleted")),D&&o.ZP.success("status contact ".concat(a,' "is favorite" changed')),I&&o.ZP.error("an error occurred while deleting a contact".concat(a)),G&&o.ZP.error("an error occurred while changing the status of a contact".concat(a))}),[I,G,z,D,a]),console.log("item");var B=a[0];return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,j.jsx)(l.Z,{sx:{bgcolor:"secondary.main",width:24,height:24},children:B}),(0,j.jsxs)(s.Z,{sx:{flexGrow:1,ml:2},children:[(0,j.jsx)(d.Z,{variant:"button",display:"block",children:a}),(0,j.jsx)(d.Z,{variant:"caption",display:"block",children:Z}),(0,j.jsx)(d.Z,{variant:"overline",display:"block",children:x})]}),(0,j.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,j.jsx)(u.Z,{size:"small","aria-label":"delete",color:"primary",onClick:function(){return W(n)},disabled:L,children:(0,j.jsx)(h.Z,{fontSize:"inherit"})}),(0,j.jsx)("div",{children:(0,j.jsx)(u.Z,{size:"small",color:"primary","aria-label":"edit",onClick:w,children:(0,j.jsx)(m.Z,{fontSize:"inherit"})})}),(0,j.jsx)(u.Z,{size:"small","aria-label":"favorite",color:"primary",disabled:_,onClick:function(){return T({id:n,data:{favorite:!p}})},children:p?(0,j.jsx)(v.Z,{fontSize:"inherit"}):(0,j.jsx)(f.Z,{fontSize:"inherit"})})]})]}),(0,j.jsx)(C,{isOpen:y,toggleIsOpen:w,children:(0,j.jsx)(P,{id:n})})]})}var E=a(5048),W=a(5052),O=a(7177);function z(e){var n,a=e.data,t=a;console.log("list");var r=(0,E.v9)(W.B8);(0,E.v9)(W.XG)&&(t=null===a||void 0===a?void 0:a.data.result.filter((function(e){return e.favorite})));var i=function(){var e,n=r.toLowerCase();return null===(e=t)||void 0===e?void 0:e.filter((function(e){return e.name.toLowerCase().includes(n)}))}();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(O.Z,{children:i?null===i||void 0===i?void 0:i.map((function(e){var n=e._id,a=e.name,t=e.phone,r=e.email,i=e.favorite;return(0,j.jsx)(S,{id:n,name:a,phone:t,email:r,favorite:i},n)})):(0,j.jsx)(d.Z,{children:"Loading Contact ..."})}),0===(null===(n=t)||void 0===n?void 0:n.length)&&(0,j.jsx)(d.Z,{children:"there are not contacts"})]})}var I=a(1169);function L(){var e=(0,E.v9)(W.B8),n=(0,E.I0)();return(0,j.jsx)(c.Z,{children:(0,j.jsx)(I.ZP,{component:"form",value:e,onChange:function(e){n((0,W.Tv)(e.target.value))},placeholder:" Find contacts by name "})})}var F=a(5590),N=a(2892),T=a(4666),q=a(757),D=a(2419),G=(0,a(277).ZP)(F.Z)({position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"});function _(e){var n=e.onOpenModal,a=(0,E.I0)(),t=(0,E.v9)(W.XG);return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(N.Z,{position:"fixed",color:"primary",sx:{top:"auto",bottom:0},children:(0,j.jsxs)(T.Z,{children:[(0,j.jsx)(u.Z,{color:"inherit","aria-label":"favorite list",size:"large",onClick:function(){return a((0,W.o)())},children:t?(0,j.jsx)(q.Z,{}):(0,j.jsx)(v.Z,{})}),(0,j.jsx)(G,{color:"secondary","aria-label":"add",onClick:n,children:(0,j.jsx)(D.Z,{})})]})})})}function B(){var e=y("name",""),n=(0,t.Z)(e,2),a=n[0],c=n[1],l=y("email",""),d=(0,t.Z)(l,2),u=d[0],m=d[1],h=y("phone",""),f=(0,t.Z)(h,2),v=f[0],x=f[1],Z=(0,i.Tn)(),p=(0,t.Z)(Z,2),g=p[0],b=p[1],C=b.isSuccess,P=b.data,S=b.isError,E=b.error,W=(0,i.wY)().data,O=null===W||void 0===W?void 0:W.data.result;(0,r.useEffect)((function(){C&&o.ZP.success("contact ".concat(P.data.contact.name," add in list")),S&&o.ZP.error("Error: ".concat(E.data.message," "))}),[C,P,E,S,v]);var z=function(e){var n=e.currentTarget,a=n.name,t=n.value;switch(a){case"name":c(t);break;case"email":m(t);break;case"phone":x(t)}};return(0,j.jsxs)(s.Z,{component:"form",onSubmit:function(e){e.preventDefault(),a&&v?function(){var e=null===O||void 0===O?void 0:O.find((function(e){return e.name.toLowerCase()===a.toLowerCase()})),n=null===O||void 0===O?void 0:O.find((function(e){return e.phone===v}));e?o.ZP.error("".concat(a," is already in contacts")):n?o.ZP.error("contact with ".concat(v," number is already in contacts")):(g({name:a,phone:v,email:u}),c(""),m(""),x(""))}():(0,o.ZP)("name and phone must have in form")},noValidate:!0,sx:{maxWidth:"sm",mx:"auto",p:"15px"},children:[(0,j.jsx)(k.Z,{margin:"normal",required:!0,fullWidth:!0,label:"Name",name:"name",value:a,autoFocus:!0,onChange:z}),(0,j.jsx)(k.Z,{margin:"normal",fullWidth:!0,id:"email",label:"Email",name:"email",value:u,onChange:z}),(0,j.jsx)(k.Z,{margin:"normal",required:!0,fullWidth:!0,name:"phone",value:v,label:"Phone",type:"tel",onChange:z}),(0,j.jsx)(w.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Add"})]})}function J(){var e=(0,r.useState)(!1),n=(0,t.Z)(e,2),a=n[0],o=n[1],c=function(){o(!a)},l=(0,i.wY)().data,s=null===l||void 0===l?void 0:l.data.result;return(0,j.jsxs)(j.Fragment,{children:[(null===s||void 0===s?void 0:s.length)>5&&(0,j.jsx)(L,{}),(0,j.jsx)(z,{data:s}),(0,j.jsx)(_,{onOpenModal:c}),(0,j.jsx)(C,{isOpen:a,toggleIsOpen:c,children:(0,j.jsx)(B,{})})]})}}}]);
//# sourceMappingURL=500.46ca90f5.chunk.js.map