"use strict";(self.webpackChunkcontacts_book=self.webpackChunkcontacts_book||[]).push([[799],{2799:function(e,n,a){a.r(n),a.d(n,{default:function(){return X}});var t=a(885),i=a(2791),r=a(6925),o=a(6650),c=a(3978),l=a(6015),s=a(4565),d=a(3811),u=a(9e3),m=a(5218),h=a(7488),f=a(7237),x=a(3329),v=function(e){var n=e.id,a=e.name,o=e.favorite,c=(0,r.Z0)(),l=(0,t.Z)(c,2),s=l[0],u=l[1],v=u.isSuccess,Z=u.error,p=u.isLoading;return(0,i.useEffect)((function(){v&&m.ZP.success("status contact ".concat(a,' "is favorite" changed')),Z&&m.ZP.error("an error occurred while changing the status of a contact".concat(a))}),[Z,v,a]),(0,x.jsx)(d.Z,{size:"small","aria-label":"favorite",color:"primary",disabled:p,onClick:function(){return s({id:n,data:{favorite:!o}})},children:o?(0,x.jsx)(f.Z,{fontSize:"inherit"}):(0,x.jsx)(h.Z,{fontSize:"inherit"})})},Z=a(7247),p=function(e){var n=e.id,a=e.name,o=(0,r.Nt)(),c=(0,t.Z)(o,2),l=c[0],s=c[1],u=s.isSuccess,h=s.error,f=s.isLoading;return(0,i.useEffect)((function(){u&&m.ZP.success("contact ".concat(a," is deleted")),h&&m.ZP.error("an error occurred while deleting a contact".concat(a))}),[h,u,a]),(0,x.jsx)(d.Z,{size:"small","aria-label":"delete",color:"primary",onClick:function(){return l(n)},disabled:f,children:(0,x.jsx)(Z.Z,{fontSize:"inherit"})})},j=a(1413),g=a(2232),b=a(5399),C=a(9823),y=i.forwardRef((function(e,n){return(0,x.jsx)(g.Z,(0,j.Z)({direction:"up",ref:n},e))})),k=function(e){var n=e.children,a=e.isOpen,t=e.toggleIsOpen;return(0,x.jsxs)(b.Z,{open:a,onClose:t,TransitionComponent:y,children:[(0,x.jsx)(d.Z,{sx:{width:"25px",height:"25px"},color:"inherit",onClick:t,"aria-label":"close",children:(0,x.jsx)(C.Z,{})}),n]})},w=function(e,n){var a=(0,i.useState)((function(){var a;try{var t;a=JSON.parse(null!==(t=localStorage.getItem(e))&&void 0!==t?t:n)}catch(i){a=n}return a})),r=(0,t.Z)(a,2),o=r[0],c=r[1];return(0,i.useEffect)((function(){localStorage.setItem(e,JSON.stringify(o))}),[o,e]),[o,c]},P=a(8437),S=a(7205),E=function(e){var n=e.id,a=w("editedName",""),o=(0,t.Z)(a,2),c=o[0],s=o[1],d=w("editedEmail",""),u=(0,t.Z)(d,2),h=u[0],f=u[1],v=w("editedPhone",""),Z=(0,t.Z)(v,2),p=Z[0],j=Z[1];console.log("EditContactForm");var g=(0,r.W1)(n).data,b=(0,r.i)(),C=(0,t.Z)(b,2),y=C[0],k=C[1],E=k.isSuccess,W=k.isError,O=k.error;function z(e){var n=e.currentTarget,a=n.name,t=n.value;switch(a){case"name":s(t);break;case"email":f(t);break;case"phone":j(t)}}(0,i.useEffect)((function(){g&&(s(g.data.contact.name),f(g.data.contact.email),j(g.data.contact.phone))}),[g,f,s,j]),(0,i.useEffect)((function(){E&&m.ZP.success("contact ".concat(g.data.contact.name," changed ")),W&&m.ZP.error("Error: ".concat(O.data.message," "))}),[g,O,W,E]);return(0,x.jsxs)(l.Z,{component:"form",onSubmit:function(e){e.preventDefault(),g.data.contact.name!==c||g.data.contact.email!==h||g.data.contact.phone!==p?(y({id:n,data:{name:c,email:h,phone:p}}),y({id:n,data:{name:c,email:h,phone:p}})):(0,m.ZP)("contact is not changed ")},noValidate:!0,sx:{maxWidth:"sm",mx:"auto",p:"15px"},children:[(0,x.jsx)(P.Z,{margin:"normal",fullWidth:!0,label:"Name",name:"name",value:c,onChange:z}),(0,x.jsx)(P.Z,{margin:"normal",fullWidth:!0,label:"Email",name:"email",value:h,onChange:z}),(0,x.jsx)(P.Z,{margin:"normal",required:!0,fullWidth:!0,name:"phone",value:p,label:"Phone",type:"tel",onChange:z}),(0,x.jsx)(S.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Change"})]})},W=function(e){var n=e.id,a=e.name,r=e.phone,m=e.email,h=e.favorite,f=(0,i.useState)(!1),Z=(0,t.Z)(f,2),j=Z[0],g=Z[1],b=function(){g(!j)},C=a[0];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,x.jsx)(c.Z,{sx:{bgcolor:"secondary.main",width:24,height:24},children:C}),(0,x.jsxs)(l.Z,{sx:{flexGrow:1,ml:2},children:[(0,x.jsx)(s.Z,{variant:"button",display:"block",children:a}),(0,x.jsx)(s.Z,{variant:"caption",display:"block",children:m}),(0,x.jsx)(s.Z,{variant:"overline",display:"block",children:r})]}),(0,x.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,x.jsx)(p,{id:n,name:a}),(0,x.jsx)(d.Z,{size:"small",color:"primary","aria-label":"edit",onClick:b,children:(0,x.jsx)(u.Z,{fontSize:"inherit"})}),(0,x.jsx)(v,{id:n,favorite:h,name:a})]})]}),j&&(0,x.jsx)(k,{isOpen:j,toggleIsOpen:b,children:(0,x.jsx)(E,{id:n})})]})},O=a(5048),z=a(5052),I=a(7177),F=function(e){var n,a=e.data,t=(0,O.v9)(z.B8);(0,O.v9)(z.XG)&&(a=a.filter((function(e){return e.favorite})));var i=function(){var e,n=t.toLowerCase();return null===(e=a)||void 0===e?void 0:e.filter((function(e){return e.name.toLowerCase().includes(n)}))}();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(I.Z,{children:i?null===i||void 0===i?void 0:i.map((function(e){var n=e._id,a=e.name,t=e.phone,i=e.email,r=e.favorite;return(0,x.jsx)(W,{id:n,name:a,phone:t,email:i,favorite:r},n)})):(0,x.jsx)(s.Z,{children:"Loading Contact ..."})}),0===(null===(n=a)||void 0===n?void 0:n.length)&&(0,x.jsx)(s.Z,{children:"there are not contacts"})]})},L=a(1169),N=function(){var e=(0,O.v9)(z.B8),n=(0,O.I0)();return(0,x.jsx)(o.Z,{children:(0,x.jsx)(L.ZP,{component:"form",value:e,onChange:function(e){n((0,z.Tv)(e.target.value))},placeholder:" Find contacts by name "})})},T=(0,i.memo)(N),q=a(5590),D=a(2892),G=a(4666),_=a(757),B=a(2419),J=(0,a(277).ZP)(q.Z)({position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"}),M=function(e){var n=e.onOpenModal,a=(0,O.I0)(),t=(0,O.v9)(z.XG);return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(D.Z,{position:"fixed",color:"primary",sx:{top:"auto",bottom:0},children:(0,x.jsxs)(G.Z,{children:[(0,x.jsx)(d.Z,{color:"inherit","aria-label":"favorite list",size:"large",onClick:function(){return a((0,z.o)())},children:t?(0,x.jsx)(_.Z,{}):(0,x.jsx)(f.Z,{})}),(0,x.jsx)(J,{color:"secondary","aria-label":"add",onClick:n,children:(0,x.jsx)(B.Z,{})})]})})})},V=function(){var e=w("name",""),n=(0,t.Z)(e,2),a=n[0],o=n[1],c=w("email",""),s=(0,t.Z)(c,2),d=s[0],u=s[1],h=w("phone",""),f=(0,t.Z)(h,2),v=f[0],Z=f[1],p=(0,r.Tn)(),j=(0,t.Z)(p,2),g=j[0],b=j[1],C=b.isSuccess,y=b.data,k=b.isError,E=b.error,W=(0,r.wY)().data,O=null===W||void 0===W?void 0:W.data.result;(0,i.useEffect)((function(){C&&m.ZP.success("contact ".concat(y.data.contact.name," add in list")),k&&m.ZP.error("Error: ".concat(E.data.message," "))}),[C,y,E,k,v]);var z=function(e){var n=e.currentTarget,a=n.name,t=n.value;switch(a){case"name":o(t);break;case"email":u(t);break;case"phone":Z(t)}};return(0,x.jsxs)(l.Z,{component:"form",onSubmit:function(e){e.preventDefault(),a&&v?function(){var e=null===O||void 0===O?void 0:O.find((function(e){return e.name.toLowerCase()===a.toLowerCase()})),n=null===O||void 0===O?void 0:O.find((function(e){return e.phone===v}));e?m.ZP.error("".concat(a," is already in contacts")):n?m.ZP.error("contact with ".concat(v," number is already in contacts")):(g({name:a,phone:v,email:d}),o(""),u(""),Z(""))}():(0,m.ZP)("name and phone must have in form")},noValidate:!0,sx:{maxWidth:"sm",mx:"auto",p:"15px"},children:[(0,x.jsx)(P.Z,{margin:"normal",required:!0,fullWidth:!0,label:"Name",name:"name",value:a,autoFocus:!0,onChange:z}),(0,x.jsx)(P.Z,{margin:"normal",fullWidth:!0,id:"email",label:"Email",name:"email",value:d,onChange:z}),(0,x.jsx)(P.Z,{margin:"normal",required:!0,fullWidth:!0,name:"phone",value:v,label:"Phone",type:"tel",onChange:z}),(0,x.jsx)(S.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Add"})]})},X=function(){var e=(0,i.useState)(!1),n=(0,t.Z)(e,2),a=n[0],o=n[1],c=function(){o(!a)},l=(0,r.wY)().data,s=null===l||void 0===l?void 0:l.data.result;return(0,x.jsxs)(x.Fragment,{children:[(null===s||void 0===s?void 0:s.length)>5&&(0,x.jsx)(T,{}),(0,x.jsx)(F,{data:s}),(0,x.jsx)(M,{onOpenModal:c}),a&&(0,x.jsx)(k,{isOpen:a,toggleIsOpen:c,children:(0,x.jsx)(V,{})})]})}}}]);
//# sourceMappingURL=799.9119229d.chunk.js.map