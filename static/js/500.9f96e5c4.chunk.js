"use strict";(self.webpackChunkcontacts_book=self.webpackChunkcontacts_book||[]).push([[500],{6500:function(e,n,a){a.r(n),a.d(n,{default:function(){return J}});var t=a(885),i=a(2791),r=a(6650),o=a(3978),l=a(6015),c=a(4565),s=a(3811),d=a(9e3),u=a(7247),m=a(7488),h=a(7237),f=a(1413),x=a(2232),v=a(5399),Z=a(9823),p=a(3329),j=i.forwardRef((function(e,n){return(0,p.jsx)(x.Z,(0,f.Z)({direction:"up",ref:n},e))}));function g(e){var n=e.children,a=e.isOpen,t=e.toggleIsOpen;return(0,p.jsxs)(v.Z,{open:a,onClose:t,TransitionComponent:j,children:[(0,p.jsx)(s.Z,{sx:{width:"25px",height:"25px"},color:"inherit",onClick:t,"aria-label":"close",children:(0,p.jsx)(Z.Z,{})}),n]})}var b=a(5218),C=function(e,n){var a=(0,i.useState)((function(){var a;try{var t;a=JSON.parse(null!==(t=localStorage.getItem(e))&&void 0!==t?t:n)}catch(i){a=n}return a})),r=(0,t.Z)(a,2),o=r[0],l=r[1];return(0,i.useEffect)((function(){localStorage.setItem(e,JSON.stringify(o))}),[o,e]),[o,l]},y=a(6925),k=a(8437),w=a(7205);function S(e){var n=e.id,a=C("editedName",""),r=(0,t.Z)(a,2),o=r[0],c=r[1],s=C("editedEmail",""),d=(0,t.Z)(s,2),u=d[0],m=d[1],h=C("editedPhone",""),f=(0,t.Z)(h,2),x=f[0],v=f[1],Z=(0,y.W1)(n).data,j=(0,y.i)(),g=(0,t.Z)(j,2),S=g[0],P=g[1],E=P.isSuccess,W=P.isError,O=P.error;function z(e){var n=e.currentTarget,a=n.name,t=n.value;switch(a){case"name":c(t);break;case"email":m(t);break;case"phone":v(t)}}(0,i.useEffect)((function(){Z&&(c(Z.data.contact.name),m(Z.data.contact.email),v(Z.data.contact.phone))}),[Z,m,c,v]),(0,i.useEffect)((function(){E&&b.ZP.success("contact ".concat(Z.data.contact.name," changed ")),W&&b.ZP.error("Error: ".concat(O.data.message," "))}),[Z,O,W,E]);return(0,p.jsxs)(l.Z,{component:"form",onSubmit:function(e){e.preventDefault(),Z.data.contact.name!==o||Z.data.contact.email!==u||Z.data.contact.phone!==x?(S({id:n,data:{name:o,email:u,phone:x}}),S({id:n,data:{name:o,email:u,phone:x}})):(0,b.ZP)("contact is not changed ")},noValidate:!0,sx:{maxWidth:"sm",mx:"auto",p:"15px"},children:[(0,p.jsx)(k.Z,{margin:"normal",fullWidth:!0,label:"Name",name:"name",value:o,onChange:z}),(0,p.jsx)(k.Z,{margin:"normal",fullWidth:!0,label:"Email",name:"email",value:u,onChange:z}),(0,p.jsx)(k.Z,{margin:"normal",required:!0,fullWidth:!0,name:"phone",value:x,label:"Phone",type:"tel",onChange:z}),(0,p.jsx)(w.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Change"})]})}function P(e){var n=e.id,a=e.name,f=e.phone,x=e.email,v=e.onDeleteContact,Z=e.favorite,j=e.onToggleFavoriteContact,b=i.useState(!1),C=(0,t.Z)(b,2),y=C[0],k=C[1],w=function(){k(!y)},P=a[0];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,p.jsx)(o.Z,{sx:{bgcolor:"secondary.main",width:24,height:24},children:P}),(0,p.jsxs)(l.Z,{sx:{flexGrow:1,ml:2},children:[(0,p.jsx)(c.Z,{variant:"button",display:"block",children:a}),(0,p.jsx)(c.Z,{variant:"caption",display:"block",children:x}),(0,p.jsx)(c.Z,{variant:"overline",display:"block",children:f})]}),(0,p.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,p.jsx)(s.Z,{size:"small","aria-label":"delete",color:"primary",onClick:v,children:(0,p.jsx)(u.Z,{fontSize:"inherit"})}),(0,p.jsx)("div",{children:(0,p.jsx)(s.Z,{size:"small",color:"primary","aria-label":"edit",onClick:w,children:(0,p.jsx)(d.Z,{fontSize:"inherit"})})}),(0,p.jsx)(s.Z,{size:"small","aria-label":"favorite",color:"primary",onClick:j,children:Z?(0,p.jsx)(h.Z,{fontSize:"inherit"}):(0,p.jsx)(m.Z,{fontSize:"inherit"})})]})]}),(0,p.jsx)(g,{isOpen:y,toggleIsOpen:w,children:(0,p.jsx)(S,{id:n})})]})}var E=a(5048),W=a(5052),O=a(7177);function z(){var e,n=(0,y.wY)().data,a=null===n||void 0===n?void 0:n.data.result,i=(0,y.Nt)(),r=(0,t.Z)(i,1)[0],o=(0,y.Z0)(),l=(0,t.Z)(o,1)[0],s=(0,E.v9)(W.B8);(0,E.v9)(W.XG)&&(a=null===n||void 0===n?void 0:n.data.result.filter((function(e){return e.favorite})));var d=function(){var e,n=s.toLowerCase();return null===(e=a)||void 0===e?void 0:e.filter((function(e){return e.name.toLowerCase().includes(n)}))}();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(O.Z,{children:d?null===d||void 0===d?void 0:d.map((function(e){var n=e._id,a=e.name,t=e.phone,i=e.email,o=e.favorite;return(0,p.jsx)(P,{id:n,name:a,phone:t,email:i,favorite:o,onDeleteContact:function(){return r(n)},onToggleFavoriteContact:function(){return l({id:n,data:{favorite:!o}})}},n)})):(0,p.jsx)(c.Z,{children:"Loading Contact ..."})}),0===(null===(e=a)||void 0===e?void 0:e.length)&&(0,p.jsx)(c.Z,{children:"there are not contacts"})]})}var I=a(1169);function F(){var e=(0,E.v9)(W.B8),n=(0,E.I0)();return(0,p.jsx)(r.Z,{children:(0,p.jsx)(I.ZP,{component:"form",value:e,onChange:function(e){n((0,W.Tv)(e.target.value))},placeholder:" Find contacts by name "})})}var T=a(5590),N=a(2892),D=a(4666),L=a(757),q=a(2419),G=(0,a(277).ZP)(T.Z)({position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"});function _(e){var n=e.onOpenModal,a=(0,E.I0)(),t=(0,E.v9)(W.XG);return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(N.Z,{position:"fixed",color:"primary",sx:{top:"auto",bottom:0},children:(0,p.jsxs)(D.Z,{children:[(0,p.jsx)(s.Z,{color:"inherit","aria-label":"favorite list",size:"large",onClick:function(){return a((0,W.o)())},children:t?(0,p.jsx)(L.Z,{}):(0,p.jsx)(h.Z,{})}),(0,p.jsx)(G,{color:"secondary","aria-label":"add",onClick:n,children:(0,p.jsx)(q.Z,{})})]})})})}function B(){var e=C("name",""),n=(0,t.Z)(e,2),a=n[0],r=n[1],o=C("email",""),c=(0,t.Z)(o,2),s=c[0],d=c[1],u=C("phone",""),m=(0,t.Z)(u,2),h=m[0],f=m[1],x=(0,y.Tn)(),v=(0,t.Z)(x,2),Z=v[0],j=v[1],g=j.isSuccess,S=j.data,P=j.isError,E=j.error,W=(0,y.wY)().data,O=null===W||void 0===W?void 0:W.data.result;(0,i.useEffect)((function(){g&&b.ZP.success("contact ".concat(S.data.contact.name," add in list")),P&&b.ZP.error("Error: ".concat(E.data.message," "))}),[g,S,E,P,h]);var z=function(e){var n=e.currentTarget,a=n.name,t=n.value;switch(a){case"name":r(t);break;case"email":d(t);break;case"phone":f(t)}};return(0,p.jsxs)(l.Z,{component:"form",onSubmit:function(e){e.preventDefault(),a&&h?function(){var e=null===O||void 0===O?void 0:O.find((function(e){return e.name.toLowerCase()===a.toLowerCase()})),n=null===O||void 0===O?void 0:O.find((function(e){return e.phone===h}));e?b.ZP.error("".concat(a," is already in contacts")):n?b.ZP.error("contact with ".concat(h," number is already in contacts")):(Z({name:a,phone:h,email:s}),r(""),d(""),f(""))}():(0,b.ZP)("name and phone must have in form")},noValidate:!0,sx:{maxWidth:"sm",mx:"auto",p:"15px"},children:[(0,p.jsx)(k.Z,{margin:"normal",required:!0,fullWidth:!0,label:"Name",name:"name",value:a,autoFocus:!0,onChange:z}),(0,p.jsx)(k.Z,{margin:"normal",fullWidth:!0,id:"email",label:"Email",name:"email",value:s,onChange:z}),(0,p.jsx)(k.Z,{margin:"normal",required:!0,fullWidth:!0,name:"phone",value:h,label:"Phone",type:"tel",onChange:z}),(0,p.jsx)(w.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Add"})]})}function J(){var e=(0,i.useState)(!1),n=(0,t.Z)(e,2),a=n[0],r=n[1],o=function(){r(!a)};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(F,{}),(0,p.jsx)(z,{}),(0,p.jsx)(_,{onOpenModal:o}),(0,p.jsx)(g,{isOpen:a,toggleIsOpen:o,children:(0,p.jsx)(B,{})})]})}}}]);
//# sourceMappingURL=500.9f96e5c4.chunk.js.map